<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LEWU Education App</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
  />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap"
    rel="stylesheet"
  />
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
  </style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">
  <div id="app" class="flex-grow flex flex-col">
    <!-- Login / Sign In Screen -->
    <div id="auth-screen" class="flex flex-col items-center justify-center min-h-screen px-4">
      <h1 class="text-4xl font-bold mb-6 text-indigo-600">LEWU Education App</h1>
      <div class="w-full max-w-md bg-white rounded-lg shadow-lg p-8">
        <div class="flex justify-center mb-6 space-x-8">
          <button
            id="loginBtn"
            class="text-indigo-600 font-semibold border-b-2 border-indigo-600 pb-1 focus:outline-none"
          >
            Log In
          </button>
          <button
            id="signupBtn"
            class="text-gray-500 font-semibold border-b-2 border-transparent pb-1 hover:text-indigo-600 focus:outline-none"
          >
            Sign Up
          </button>
        </div>
        <form id="loginForm" class="space-y-6">
          <div>
            <label for="loginEmail" class="block text-sm font-medium text-gray-700 mb-1"
              >Email address</label
            >
            <input
              type="email"
              id="loginEmail"
              required
              class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"
              placeholder="you@example.com"
            />
          </div>
          <div>
            <label for="loginPassword" class="block text-sm font-medium text-gray-700 mb-1"
              >Password</label
            >
            <input
              type="password"
              id="loginPassword"
              required
              class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"
              placeholder="********"
            />
          </div>
          <button
            type="submit"
            class="w-full bg-indigo-600 text-white py-2 rounded-md font-semibold hover:bg-indigo-700 transition"
          >
            Log In
          </button>
        </form>
        <form id="signupForm" class="space-y-6 hidden">
          <div>
            <label for="signupName" class="block text-sm font-medium text-gray-700 mb-1"
              >Full Name</label
            >
            <input
              type="text"
              id="signupName"
              required
              class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"
              placeholder="John Doe"
            />
          </div>
          <div>
            <label for="signupEmail" class="block text-sm font-medium text-gray-700 mb-1"
              >Email address</label
            >
            <input
              type="email"
              id="signupEmail"
              required
              class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"
              placeholder="you@example.com"
            />
          </div>
          <div>
            <label for="signupPassword" class="block text-sm font-medium text-gray-700 mb-1"
              >Password</label
            >
            <input
              type="password"
              id="signupPassword"
              required
              class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"
              placeholder="********"
            />
          </div>
          <button
            type="submit"
            class="w-full bg-indigo-600 text-white py-2 rounded-md font-semibold hover:bg-indigo-700 transition"
          >
            Sign Up
          </button>
        </form>
      </div>
    </div>

    <!-- Main App Screen -->
    <div id="main-app" class="hidden flex flex-col min-h-screen">
      <header class="bg-indigo-600 text-white p-4 flex items-center justify-between">
        <h1 class="text-2xl font-bold">LEWU Education App</h1>
        <button
          id="logoutBtn"
          class="flex items-center space-x-2 hover:bg-indigo-700 px-3 py-1 rounded"
          title="Log Out"
        >
          <i class="fas fa-sign-out-alt"></i>
          <span>Log Out</span>
        </button>
      </header>

      <main class="flex-grow overflow-auto p-4 max-w-4xl mx-auto w-full">
        <section id="levels-section" class="mb-8">
          <h2 class="text-xl font-semibold mb-4 text-indigo-700">Select a Level (1-10)</h2>
          <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4">
            <button
              class="level-btn bg-indigo-100 hover:bg-indigo-200 rounded-lg p-4 font-semibold text-indigo-800 shadow"
              data-level="1"
            >
              Level 1
            </button>
            <button
              class="level-btn bg-indigo-100 hover:bg-indigo-200 rounded-lg p-4 font-semibold text-indigo-800 shadow"
              data-level="2"
            >
              Level 2
            </button>
            <button
              class="level-btn bg-indigo-100 hover:bg-indigo-200 rounded-lg p-4 font-semibold text-indigo-800 shadow"
              data-level="3"
            >
              Level 3
            </button>
            <button
              class="level-btn bg-indigo-100 hover:bg-indigo-200 rounded-lg p-4 font-semibold text-indigo-800 shadow"
              data-level="4"
            >
              Level 4
            </button>
            <button
              class="level-btn bg-indigo-100 hover:bg-indigo-200 rounded-lg p-4 font-semibold text-indigo-800 shadow"
              data-level="5"
            >
              Level 5
            </button>
            <button
              class="level-btn bg-indigo-100 hover:bg-indigo-200 rounded-lg p-4 font-semibold text-indigo-800 shadow"
              data-level="6"
            >
              Level 6
            </button>
            <button
              class="level-btn bg-indigo-100 hover:bg-indigo-200 rounded-lg p-4 font-semibold text-indigo-800 shadow"
              data-level="7"
            >
              Level 7
            </button>
            <button
              class="level-btn bg-indigo-100 hover:bg-indigo-200 rounded-lg p-4 font-semibold text-indigo-800 shadow"
              data-level="8"
            >
              Level 8
            </button>
            <button
              class="level-btn bg-indigo-100 hover:bg-indigo-200 rounded-lg p-4 font-semibold text-indigo-800 shadow"
              data-level="9"
            >
              Level 9
            </button>
            <button
              class="level-btn bg-indigo-100 hover:bg-indigo-200 rounded-lg p-4 font-semibold text-indigo-800 shadow"
              data-level="10"
            >
              Level 10
            </button>
          </div>
        </section>

        <section id="words-section" class="hidden mb-8">
          <h2 class="text-xl font-semibold mb-4 text-indigo-700">New Words for Level <span id="current-level"></span></h2>
          <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
            <!-- Words will be injected here -->
          </div>
          <button
            id="startTestBtn"
            class="mt-6 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded w-full max-w-xs"
          >
            Start Level Test
          </button>
          <button
            id="backToLevelsBtn"
            class="mt-3 text-indigo-600 hover:underline font-semibold w-full max-w-xs"
          >
            Back to Levels
          </button>
        </section>

        <section id="test-section" class="hidden">
          <h2 class="text-xl font-semibold mb-4 text-indigo-700">Level <span id="test-level"></span> Test</h2>
          <form id="testForm" class="space-y-6">
            <!-- Test questions injected here -->
          </form>
          <div class="flex justify-between mt-6 max-w-2xl">
            <button
              id="prevQuestionBtn"
              class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded disabled:opacity-50"
              disabled
              type="button"
            >
              Previous
            </button>
            <button
              id="nextQuestionBtn"
              class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded"
              type="button"
            >
              Next
            </button>
          </div>
          <button
            id="submitTestBtn"
            class="mt-6 bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded w-full max-w-xs hidden"
            type="button"
          >
            Submit Test
          </button>
          <button
            id="backToWordsBtn"
            class="mt-3 text-indigo-600 hover:underline font-semibold w-full max-w-xs hidden"
            type="button"
          >
            Back to Words
          </button>
        </section>

        <section id="result-section" class="hidden max-w-2xl mx-auto text-center">
          <h2 class="text-2xl font-bold mb-4 text-indigo-700">Test Result</h2>
          <p class="text-lg mb-6" id="resultText"></p>
          <button
            id="resultBackBtn"
            class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded w-full max-w-xs"
          >
            Back to Levels
          </button>
        </section>
      </main>
    </div>
  </div>

  <script>
    // Data for 10 levels, each with 5 new Uzbek words and their English translations and images
    const levelsData = {
      1: [
        {
          uz: "Salom",
          en: "Hello",
          img: "https://placehold.co/200x150?text=Salom+Hello&font=inter",
          alt: "A friendly person waving hello in a bright room",
        },
        {
          uz: "Kitob",
          en: "Book",
          img: "https://placehold.co/200x150?text=Kitob+Book&font=inter",
          alt: "An open book on a wooden table with sunlight",
        },
        {
          uz: "Suv",
          en: "Water",
          img: "https://placehold.co/200x150?text=Suv+Water&font=inter",
          alt: "A clear glass of water with droplets on the outside",
        },
        {
          uz: "Uy",
          en: "House",
          img: "https://placehold.co/200x150?text=Uy+House&font=inter",
          alt: "A cozy small house with a garden and a white fence",
        },
        {
          uz: "Ota",
          en: "Father",
          img: "https://placehold.co/200x150?text=Ota+Father&font=inter",
          alt: "A smiling father holding his child's hand in a park",
        },
      ],
      2: [
        {
          uz: "Maktab",
          en: "School",
          img: "https://placehold.co/200x150?text=Maktab+School&font=inter",
          alt: "A modern school building with children playing outside",
        },
        {
          uz: "Do'st",
          en: "Friend",
          img: "https://placehold.co/200x150?text=Do'st+Friend&font=inter",
          alt: "Two friends laughing and talking on a bench",
        },
        {
          uz: "Yoz",
          en: "Summer",
          img: "https://placehold.co/200x150?text=Yoz+Summer&font=inter",
          alt: "A sunny beach with people enjoying summer vacation",
        },
        {
          uz: "Qalam",
          en: "Pen",
          img: "https://placehold.co/200x150?text=Qalam+Pen&font=inter",
          alt: "A blue pen lying on a notebook with handwriting",
        },
        {
          uz: "Oyna",
          en: "Window",
          img: "https://placehold.co/200x150?text=Oyna+Window&font=inter",
          alt: "A window with white curtains and sunlight coming through",
        },
      ],
      3: [
        {
          uz: "Yurak",
          en: "Heart",
          img: "https://placehold.co/200x150?text=Yurak+Heart&font=inter",
          alt: "A red heart shape made of paper on a wooden table",
        },
        {
          uz: "Osh",
          en: "Pilaf",
          img: "https://placehold.co/200x150?text=Osh+Pilaf&font=inter",
          alt: "A plate of traditional Uzbek pilaf with rice and meat",
        },
        {
          uz: "Bog'",
          en: "Garden",
          img: "https://placehold.co/200x150?text=Bog'+Garden&font=inter",
          alt: "A lush green garden with flowers and a small path",
        },
        {
          uz: "Qush",
          en: "Bird",
          img: "https://placehold.co/200x150?text=Qush+Bird&font=inter",
          alt: "A colorful bird perched on a tree branch in spring",
        },
        {
          uz: "Yulduz",
          en: "Star",
          img: "https://placehold.co/200x150?text=Yulduz+Star&font=inter",
          alt: "A bright star shining in a dark night sky",
        },
      ],
      4: [
        {
          uz: "Daryo",
          en: "River",
          img: "https://placehold.co/200x150?text=Daryo+River&font=inter",
          alt: "A flowing river surrounded by green trees and rocks",
        },
        {
          uz: "Qish",
          en: "Winter",
          img: "https://placehold.co/200x150?text=Qish+Winter&font=inter",
          alt: "Snow-covered trees and a frozen lake in winter",
        },
        {
          uz: "Yozuvchi",
          en: "Writer",
          img: "https://placehold.co/200x150?text=Yozuvchi+Writer&font=inter",
          alt: "A person writing in a notebook with a pen at a desk",
        },
        {
          uz: "Shahar",
          en: "City",
          img: "https://placehold.co/200x150?text=Shahar+City&font=inter",
          alt: "A city skyline with tall buildings and busy streets",
        },
        {
          uz: "Bog'cha",
          en: "Kindergarten",
          img: "https://placehold.co/200x150?text=Bog'cha+Kindergarten&font=inter",
          alt: "Children playing outside a colorful kindergarten building",
        },
      ],
      5: [
        {
          uz: "Oqshom",
          en: "Evening",
          img: "https://placehold.co/200x150?text=Oqshom+Evening&font=inter",
          alt: "A sunset sky with orange and purple colors over a field",
        },
        {
          uz: "Yozuv",
          en: "Writing",
          img: "https://placehold.co/200x150?text=Yozuv+Writing&font=inter",
          alt: "Close-up of a hand writing with a pen on paper",
        },
        {
          uz: "Qishloq",
          en: "Village",
          img: "https://placehold.co/200x150?text=Qishloq+Village&font=inter",
          alt: "A peaceful village with small houses and dirt roads",
        },
        {
          uz: "Ota-ona",
          en: "Parents",
          img: "https://placehold.co/200x150?text=Ota-ona+Parents&font=inter",
          alt: "A mother and father holding hands with their child",
        },
        {
          uz: "Daraxt",
          en: "Tree",
          img: "https://placehold.co/200x150?text=Daraxt+Tree&font=inter",
          alt: "A tall green tree with sunlight filtering through leaves",
        },
      ],
      6: [
        {
          uz: "Yozuvchi",
          en: "Author",
          img: "https://placehold.co/200x150?text=Yozuvchi+Author&font=inter",
          alt: "An author typing on a laptop in a cozy room",
        },
        {
          uz: "Oqim",
          en: "Current",
          img: "https://placehold.co/200x150?text=Oqim+Current&font=inter",
          alt: "Water current flowing rapidly in a river",
        },
        {
          uz: "Qalamcha",
          en: "Pencil",
          img: "https://placehold.co/200x150?text=Qalamcha+Pencil&font=inter",
          alt: "A sharpened yellow pencil on a white desk",
        },
        {
          uz: "Yulduzcha",
          en: "Little Star",
          img: "https://placehold.co/200x150?text=Yulduzcha+Little+Star&font=inter",
          alt: "Small twinkling stars in a night sky",
        },
        {
          uz: "Bog'bon",
          en: "Gardener",
          img: "https://placehold.co/200x150?text=Bog'bon+Gardener&font=inter",
          alt: "A gardener planting flowers in a garden",
        },
      ],
      7: [
        {
          uz: "Oqshomgi",
          en: "Evening (adj.)",
          img: "https://placehold.co/200x150?text=Oqshomgi+Evening+adj&font=inter",
          alt: "Evening sky with soft purple and pink clouds",
        },
        {
          uz: "Yozuvchilar",
          en: "Writers",
          img: "https://placehold.co/200x150?text=Yozuvchilar+Writers&font=inter",
          alt: "Group of writers discussing around a table",
        },
        {
          uz: "Qishloqdagi",
          en: "In the village",
          img: "https://placehold.co/200x150?text=Qishloqdagi+In+the+village&font=inter",
          alt: "Village houses with smoke coming from chimneys",
        },
        {
          uz: "Ota-onalar",
          en: "Parents (plural)",
          img: "https://placehold.co/200x150?text=Ota-onalar+Parents+plural&font=inter",
          alt: "Parents walking with children in a park",
        },
        {
          uz: "Daraxtzor",
          en: "Orchard",
          img: "https://placehold.co/200x150?text=Daraxtzor+Orchard&font=inter",
          alt: "Rows of fruit trees in an orchard",
        },
      ],
      8: [
        {
          uz: "Yozuvchilik",
          en: "Writing (noun)",
          img: "https://placehold.co/200x150?text=Yozuvchilik+Writing+noun&font=inter",
          alt: "A notebook with handwritten text and a pen",
        },
        {
          uz: "Oqimdagi",
          en: "In the current",
          img: "https://placehold.co/200x150?text=Oqimdagi+In+the+current&font=inter",
          alt: "Water flowing swiftly in a river current",
        },
        {
          uz: "Qalamchalar",
          en: "Pencils",
          img: "https://placehold.co/200x150?text=Qalamchalar+Pencils&font=inter",
          alt: "A bunch of colorful pencils in a cup",
        },
        {
          uz: "Yulduzchalari",
          en: "His/her little stars",
          img: "https://placehold.co/200x150?text=Yulduzchalari+His+her+little+stars&font=inter",
          alt: "Small stars shining brightly in the night sky",
        },
        {
          uz: "Bog'bonlar",
          en: "Gardeners",
          img: "https://placehold.co/200x150?text=Bog'bonlar+Gardeners&font=inter",
          alt: "Several gardeners working in a large garden",
        },
      ],
      9: [
        {
          uz: "Oqshomlik",
          en: "Evening time",
          img: "https://placehold.co/200x150?text=Oqshomlik+Evening+time&font=inter",
          alt: "Sunset with orange and pink hues over a field",
        },
        {
          uz: "Yozuvchilarning",
          en: "Of the writers",
          img: "https://placehold.co/200x150?text=Yozuvchilarning+Of+the+writers&font=inter",
          alt: "Writers working on laptops in a cafe",
        },
        {
          uz: "Qishloqdagi",
          en: "In the village",
          img: "https://placehold.co/200x150?text=Qishloqdagi+In+the+village&font=inter",
          alt: "Village houses with gardens and trees",
        },
        {
          uz: "Ota-onalarning",
          en: "Of the parents",
          img: "https://placehold.co/200x150?text=Ota-onalarning+Of+the+parents&font=inter",
          alt: "Parents watching children play in a park",
        },
        {
          uz: "Daraxtzorlari",
          en: "Their orchards",
          img: "https://placehold.co/200x150?text=Daraxtzorlari+Their+orchards&font=inter",
          alt: "Rows of fruit trees in a large orchard",
        },
      ],
      10: [
        {
          uz: "Yozuvchilikning",
          en: "Of writing",
          img: "https://placehold.co/200x150?text=Yozuvchilikning+Of+writing&font=inter",
          alt: "Close-up of a hand writing on paper with a pen",
        },
        {
          uz: "Oqimdagilar",
          en: "Those in the current",
          img: "https://placehold.co/200x150?text=Oqimdagilar+Those+in+the+current&font=inter",
          alt: "People swimming in a river current",
        },
        {
          uz: "Qalamchalari",
          en: "His/her pencils",
          img: "https://placehold.co/200x150?text=Qalamchalari+His+her+pencils&font=inter",
          alt: "A set of pencils in a pencil case",
        },
        {
          uz: "Yulduzchalar",
          en: "Little stars",
          img: "https://placehold.co/200x150?text=Yulduzchalar+Little+stars&font=inter",
          alt: "Twinkling stars in a clear night sky",
        },
        {
          uz: "Bog'bonlarning",
          en: "Of the gardeners",
          img: "https://placehold.co/200x150?text=Bog'bonlarning+Of+the+gardeners&font=inter",
          alt: "Gardeners planting flowers in a community garden",
        },
      ],
    };

    // Test questions for each level (5 questions per level)
    // Each question: word in Uzbek, 4 options in English, correct answer index
    const testData = {
      1: [
        {
          question: "What is the English meaning of 'Salom'?",
          options: ["Goodbye", "Hello", "Thank you", "Please"],
          answer: 1,
        },
        {
          question: "What is the English meaning of 'Kitob'?",
          options: ["Pen", "Book", "Table", "Chair"],
          answer: 1,
        },
        {
          question: "What is the English meaning of 'Suv'?",
          options: ["Water", "Fire", "Air", "Earth"],
          answer: 0,
        },
        {
          question: "What is the English meaning of 'Uy'?",
          options: ["Car", "House", "Road", "Tree"],
          answer: 1,
        },
        {
          question: "What is the English meaning of 'Ota'?",
          options: ["Mother", "Brother", "Father", "Sister"],
          answer: 2,
        },
      ],
      2: [
        {
          question: "What is the English meaning of 'Maktab'?",
          options: ["School", "Hospital", "Market", "Library"],
          answer: 0,
        },
        {
          question: "What is the English meaning of 'Do'st'?",
          options: ["Enemy", "Friend", "Teacher", "Student"],
          answer: 1,
        },
        {
          question: "What is the English meaning of 'Yoz'?",
          options: ["Winter", "Spring", "Summer", "Autumn"],
          answer: 2,
        },
        {
          question: "What is the English meaning of 'Qalam'?",
          options: ["Pen", "Pencil", "Eraser", "Notebook"],
          answer: 0,
        },
        {
          question: "What is the English meaning of 'Oyna'?",
          options: ["Door", "Window", "Wall", "Floor"],
          answer: 1,
        },
      ],
      3: [
        {
          question: "What is the English meaning of 'Yurak'?",
          options: ["Heart", "Lung", "Brain", "Liver"],
          answer: 0,
        },
        {
          question: "What is the English meaning of 'Osh'?",
          options: ["Soup", "Pilaf", "Bread", "Salad"],
          answer: 1,
        },
        {
          question: "What is the English meaning of 'Bog''?",
          options: ["Garden", "Forest", "Park", "Field"],
          answer: 0,
        },
        {
          question: "What is the English meaning of 'Qush'?",
          options: ["Fish", "Bird", "Cat", "Dog"],
          answer: 1,
        },
        {
          question: "What is the English meaning of 'Yulduz'?",
          options: ["Moon", "Sun", "Star", "Cloud"],
          answer: 2,
        },
      ],
      4: [
        {
          question: "What is the English meaning of 'Daryo'?",
          options: ["Lake", "River", "Ocean", "Pond"],
          answer: 1,
        },
        {
          question: "What is the English meaning of 'Qish'?",
          options: ["Summer", "Spring", "Winter", "Autumn"],
          answer: 2,
        },
        {
          question: "What is the English meaning of 'Yozuvchi'?",
          options: ["Writer", "Painter", "Singer", "Dancer"],
          answer: 0,
        },
        {
          question: "What is the English meaning of 'Shahar'?",
          options: ["Village", "City", "Town", "Country"],
          answer: 1,
        },
        {
          question: "What is the English meaning of 'Bog'cha'?",
          options: ["Kindergarten", "School", "Hospital", "Library"],
          answer: 0,
        },
      ],
      5: [
        {
          question: "What is the English meaning of 'Oqshom'?",
          options: ["Morning", "Afternoon", "Evening", "Night"],
          answer: 2,
        },
        {
          question: "What is the English meaning of 'Yozuv'?",
          options: ["Reading", "Writing", "Speaking", "Listening"],
          answer: 1,
        },
        {
          question: "What is the English meaning of 'Qishloq'?",
          options: ["City", "Village", "Town", "Country"],
          answer: 1,
        },
        {
          question: "What is the English meaning of 'Ota-ona'?",
          options: ["Siblings", "Parents", "Friends", "Neighbors"],
          answer: 1,
        },
        {
          question: "What is the English meaning of 'Daraxt'?",
          options: ["Flower", "Tree", "Grass", "Bush"],
          answer: 1,
        },
      ],
      6: [
        {
          question: "What is the English meaning of 'Yozuvchi'?",
          options: ["Author", "Painter", "Teacher", "Student"],
          answer: 0,
        },
        {
          question: "What is the English meaning of 'Oqim'?",
          options: ["Current", "Wave", "Wind", "Rain"],
          answer: 0,
        },
        {
          question: "What is the English meaning of 'Qalamcha'?",
          options: ["Pen", "Pencil", "Brush", "Marker"],
          answer: 1,
        },
        {
          question: "What is the English meaning of 'Yulduzcha'?",
          options: ["Little Star", "Moon", "Sun", "Cloud"],
          answer: 0,
        },
        {
          question: "What is the English meaning of 'Bog'bon'?",
          options: ["Gardener", "Farmer", "Teacher", "Doctor"],
          answer: 0,
        },
      ],
      7: [
        {
          question: "What is the English meaning of 'Oqshomgi'?",
          options: ["Morning", "Evening (adj.)", "Afternoon", "Night"],
          answer: 1,
        },
        {
          question: "What is the English meaning of 'Yozuvchilar'?",
          options: ["Writers", "Readers", "Singers", "Dancers"],
          answer: 0,
        },
        {
          question: "What is the English meaning of 'Qishloqdagi'?",
          options: ["In the city", "In the village", "In the forest", "In the park"],
          answer: 1,
        },
        {
          question: "What is the English meaning of 'Ota-onalar'?",
          options: ["Parents (plural)", "Children", "Friends", "Teachers"],
          answer: 0,
        },
        {
          question: "What is the English meaning of 'Daraxtzor'?",
          options: ["Orchard", "Forest", "Garden", "Park"],
          answer: 0,
        },
      ],
      8: [
        {
          question: "What is the English meaning of 'Yozuvchilik'?",
          options: ["Writing (noun)", "Reading", "Speaking", "Listening"],
          answer: 0,
        },
        {
          question: "What is the English meaning of 'Oqimdagi'?",
          options: ["In the current", "In the wind", "In the rain", "In the sun"],
          answer: 0,
        },
        {
          question: "What is the English meaning of 'Qalamchalar'?",
          options: ["Pencils", "Pens", "Markers", "Brushes"],
          answer: 0,
        },
        {
          question: "What is the English meaning of 'Yulduzchalari'?",
          options: ["His/her little stars", "His/her moons", "His/her suns", "His/her clouds"],
          answer: 0,
        },
        {
          question: "What is the English meaning of 'Bog'bonlar'?",
          options: ["Gardeners", "Farmers", "Teachers", "Doctors"],
          answer: 0,
        },
      ],
      9: [
        {
          question: "What is the English meaning of 'Oqshomlik'?",
          options: ["Morning", "Evening time", "Afternoon", "Night"],
          answer: 1,
        },
        {
          question: "What is the English meaning of 'Yozuvchilarning'?",
          options: ["Of the writers", "Of the readers", "Of the singers", "Of the dancers"],
          answer: 0,
        },
        {
          question: "What is the English meaning of 'Qishloqdagi'?",
          options: ["In the village", "In the city", "In the forest", "In the park"],
          answer: 0,
        },
        {
          question: "What is the English meaning of 'Ota-onalarning'?",
          options: ["Of the parents", "Of the children", "Of the friends", "Of the teachers"],
          answer: 0,
        },
        {
          question: "What is the English meaning of 'Daraxtzorlari'?",
          options: ["Their orchards", "Their forests", "Their gardens", "Their parks"],
          answer: 0,
        },
      ],
      10: [
        {
          question: "What is the English meaning of 'Yozuvchilikning'?",
          options: ["Of writing", "Of reading", "Of speaking", "Of listening"],
          answer: 0,
        },
        {
          question: "What is the English meaning of 'Oqimdagilar'?",
          options: ["Those in the current", "Those in the wind", "Those in the rain", "Those in the sun"],
          answer: 0,
        },
        {
          question: "What is the English meaning of 'Qalamchalari'?",
          options: ["His/her pencils", "His/her pens", "His/her markers", "His/her brushes"],
          answer: 0,
        },
        {
          question: "What is the English meaning of 'Yulduzchalar'?",
          options: ["Little stars", "Moons", "Suns", "Clouds"],
          answer: 0,
        },
        {
          question: "What is the English meaning of 'Bog'bonlarning'?",
          options: ["Of the gardeners", "Of the farmers", "Of the teachers", "Of the doctors"],
          answer: 0,
        },
      ],
    };

    // Elements
    const authScreen = document.getElementById("auth-screen");
    const mainApp = document.getElementById("main-app");
    const loginBtn = document.getElementById("loginBtn");
    const signupBtn = document.getElementById("signupBtn");
    const loginForm = document.getElementById("loginForm");
    const signupForm = document.getElementById("signupForm");
    const logoutBtn = document.getElementById("logoutBtn");
    const levelsSection = document.getElementById("levels-section");
    const wordsSection = document.getElementById("words-section");
    const testSection = document.getElementById("test-section");
    const resultSection = document.getElementById("result-section");
    const currentLevelSpan = document.getElementById("current-level");
    const testLevelSpan = document.getElementById("test-level");
    const wordsGrid = wordsSection.querySelector("div.grid");
    const startTestBtn = document.getElementById("startTestBtn");
    const backToLevelsBtn = document.getElementById("backToLevelsBtn");
    const testForm = document.getElementById("testForm");
    const prevQuestionBtn = document.getElementById("prevQuestionBtn");
    const nextQuestionBtn = document.getElementById("nextQuestionBtn");
    const submitTestBtn = document.getElementById("submitTestBtn");
    const backToWordsBtn = document.getElementById("backToWordsBtn");
    const resultText = document.getElementById("resultText");
    const resultBackBtn = document.getElementById("resultBackBtn");

    // State
    let currentUser = null;
    let currentLevel = null;
    let currentTestIndex = 0;
    let userAnswers = [];

    // Auth toggle
    loginBtn.addEventListener("click", () => {
      loginBtn.classList.add("text-indigo-600", "border-indigo-600");
      loginBtn.classList.remove("text-gray-500", "border-transparent");
      signupBtn.classList.remove("text-indigo-600", "border-indigo-600");
      signupBtn.classList.add("text-gray-500", "border-transparent");
      loginForm.classList.remove("hidden");
      signupForm.classList.add("hidden");
    });

    signupBtn.addEventListener("click", () => {
      signupBtn.classList.add("text-indigo-600", "border-indigo-600");
      signupBtn.classList.remove("text-gray-500", "border-transparent");
      loginBtn.classList.remove("text-indigo-600", "border-indigo-600");
      loginBtn.classList.add("text-gray-500", "border-transparent");
      signupForm.classList.remove("hidden");
      loginForm.classList.add("hidden");
    });

    // Simple user storage (localStorage)
    function saveUser(email, password, name) {
      const users = JSON.parse(localStorage.getItem("lewuUsers") || "{}");
      if (users[email]) return false; // user exists
      users[email] = { password, name };
      localStorage.setItem("lewuUsers", JSON.stringify(users));
      return true;
    }

    function validateUser(email, password) {
      const users = JSON.parse(localStorage.getItem("lewuUsers") || "{}");
      if (users[email] && users[email].password === password) {
        return users[email];
      }
      return null;
    }

    // Login form submit
    loginForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const email = document.getElementById("loginEmail").value.trim().toLowerCase();
      const password = document.getElementById("loginPassword").value;
      const user = validateUser(email, password);
      if (user) {
        currentUser = { email, name: user.name };
        startApp();
      } else {
        alert("Invalid email or password.");
      }
    });

    // Signup form submit
    signupForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const name = document.getElementById("signupName").value.trim();
      const email = document.getElementById("signupEmail").value.trim().toLowerCase();
      const password = document.getElementById("signupPassword").value;
      if (saveUser(email, password, name)) {
        alert("Sign up successful! Please log in.");
        loginBtn.click();
      } else {
        alert("User with this email already exists.");
      }
    });

    // Logout
    logoutBtn.addEventListener("click", () => {
      currentUser = null;
      currentLevel = null;
      currentTestIndex = 0;
      userAnswers = [];
      mainApp.classList.add("hidden");
      authScreen.classList.remove("hidden");
      loginForm.reset();
      signupForm.reset();
    });

    // Start app after login
    function startApp() {
      authScreen.classList.add("hidden");
      mainApp.classList.remove("hidden");
      showLevels();
    }

    // Show levels section
    function showLevels() {
      currentLevel = null;
      currentTestIndex = 0;
      userAnswers = [];
      levelsSection.classList.remove("hidden");
      wordsSection.classList.add("hidden");
      testSection.classList.add("hidden");
      resultSection.classList.add("hidden");
    }

    // Show words for selected level
    function showWords(level) {
      currentLevel = level;
      currentLevelSpan.textContent = level;
      wordsGrid.innerHTML = "";
      const words = levelsData[level];
      words.forEach(({ uz, en, img, alt }) => {
        const card = document.createElement("div");
        card.className =
          "bg-white rounded-lg shadow p-4 flex flex-col items-center text-center";
        const image = document.createElement("img");
        image.src = img;
        image.alt = alt;
        image.className = "w-full h-32 object-cover rounded-md mb-3";
        const uzbekWord = document.createElement("p");
        uzbekWord.className = "text-lg font-semibold text-indigo-700 mb-1";
        uzbekWord.textContent = uz;
        const englishWord = document.createElement("p");
        englishWord.className = "text-gray-600";
        englishWord.textContent = en;
        card.appendChild(image);
        card.appendChild(uzbekWord);
        card.appendChild(englishWord);
        wordsGrid.appendChild(card);
      });
      levelsSection.classList.add("hidden");
      wordsSection.classList.remove("hidden");
      testSection.classList.add("hidden");
      resultSection.classList.add("hidden");
    }

    // Show test for current level
    function showTest(level) {
      currentTestIndex = 0;
      userAnswers = new Array(testData[level].length).fill(null);
      testLevelSpan.textContent = level;
      renderTestQuestion(level, currentTestIndex);
      levelsSection.classList.add("hidden");
      wordsSection.classList.add("hidden");
      testSection.classList.remove("hidden");
      resultSection.classList.add("hidden");
      submitTestBtn.classList.add("hidden");
      backToWordsBtn.classList.add("hidden");
      prevQuestionBtn.disabled = true;
      nextQuestionBtn.disabled = false;
    }

    // Render test question
    function renderTestQuestion(level, index) {
      const questionData = testData[level][index];
      testForm.innerHTML = "";
      const questionEl = document.createElement("h3");
      questionEl.className = "text-lg font-semibold mb-4";
      questionEl.textContent = `Q${index + 1}. ${questionData.question}`;
      testForm.appendChild(questionEl);

      questionData.options.forEach((option, i) => {
        const optionId = `option-${index}-${i}`;
        const optionWrapper = document.createElement("div");
        optionWrapper.className = "flex items-center mb-3";

        const input = document.createElement("input");
        input.type = "radio";
        input.name = "answer";
        input.id = optionId;
        input.value = i;
        input.className = "mr-3 cursor-pointer";
        if (userAnswers[index] === i) {
          input.checked = true;
        }
        input.addEventListener("change", () => {
          userAnswers[index] = i;
        });

        const label = document.createElement("label");
        label.htmlFor = optionId;
        label.className = "cursor-pointer select-none";
        label.textContent = option;

        optionWrapper.appendChild(input);
        optionWrapper.appendChild(label);
        testForm.appendChild(optionWrapper);
      });

      // Update buttons
      prevQuestionBtn.disabled = index === 0;
      nextQuestionBtn.disabled = index === testData[level].length - 1;

      // Show submit button only on last question
      if (index === testData[level].length - 1) {
        submitTestBtn.classList.remove("hidden");
        nextQuestionBtn.classList.add("hidden");
      } else {
        submitTestBtn.classList.add("hidden");
        nextQuestionBtn.classList.remove("hidden");
      }
    }

    // Event listeners for level buttons
    document.querySelectorAll(".level-btn").forEach((btn) => {
      btn.addEventListener("click", () => {
        const level = btn.getAttribute("data-level");
        showWords(level);
      });
    });

    // Start test button
    startTestBtn.addEventListener("click", () => {
      if (currentLevel) {
        showTest(currentLevel);
      }
    });

    // Back to levels from words
    backToLevelsBtn.addEventListener("click", () => {
      showLevels();
    });

    // Test navigation buttons
    prevQuestionBtn.addEventListener("click", () => {
      if (currentTestIndex > 0) {
        currentTestIndex--;
        renderTestQuestion(currentLevel, currentTestIndex);
      }
    });

    nextQuestionBtn.addEventListener("click", () => {
      if (currentTestIndex < testData[currentLevel].length - 1) {
        currentTestIndex++;
        renderTestQuestion(currentLevel, currentTestIndex);
      }
    });

    // Submit test button
    submitTestBtn.addEventListener("click", () => {
      // Check if all questions answered
      if (userAnswers.includes(null)) {
        alert("Please answer all questions before submitting.");
        return;
      }
      // Calculate score
      const answers = testData[currentLevel].map((q) => q.answer);
      let score = 0;
      for (let i = 0; i < answers.length; i++) {
        if (answers[i] === userAnswers[i]) score++;
      }
      showResult(score, answers.length);
    });

    // Show result
    function showResult(score, total) {
      resultText.textContent = `You scored ${score} out of ${total} (${(
        (score / total) *
        100
      ).toFixed(0)}%)`;
      levelsSection.classList.add("hidden");
      wordsSection.classList.add("hidden");
      testSection.classList.add("hidden");
      resultSection.classList.remove("hidden");
    }

    // Back to words from result
    resultBackBtn.addEventListener("click", () => {
      showLevels();
    });

    // Back to words from test
    backToWordsBtn.addEventListener("click", () => {
      showWords(currentLevel);
    });

    // On page load, show auth screen
    authScreen.classList.remove("hidden");
    mainApp.classList.add("hidden");
  </script>
</body>
</html>